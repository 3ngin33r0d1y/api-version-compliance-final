import{r as c,j as e}from"./index-Cm2f_w1w.js";import{S,E as G,C as m,a as v,T as J,Z as Q}from"./zap-DZ0-j7Ir.js";import{R as D,S as z,G as q}from"./server-ehqxqrdQ.js";import{C as E,E as W}from"./external-link-CWf9rAt8.js";import"./createLucideIcon-BRxI9AmF.js";function X(){var R;const[r,O]=c.useState(null),[p,w]=c.useState(!0),[y,T]=c.useState(null),[k,V]=c.useState(null),[u,$]=c.useState(!0),I={prod:"https://vgh0i1c1kodz.manus.space/?code=iTj2RJ7QTxajTb7iT5ygkn",oat:"https://qjh9iec7v5y1.manus.space/?code=iTj2RJ7QTxajTb7iT5ygkn",uat:"https://77h9ikc60z1m.manus.space/?code=iTj2RJ7QTxajTb7iT5ygkn",dev:"https://3dhkilc80jk8.manus.space/?code=iTj2RJ7QTxajTb7iT5ygkn"},g=async()=>{var t,s,i,x;w(!0),T(null);try{const a={};for(const[h,f]of Object.entries(I))try{const N=await fetch(f),A=await N.json();a[h]={service:A.service||"api-name-invoice-job",version:A.version||"0.0.0",url:f,status:N.ok?"online":"offline",environment:h,region:"paris",responseTime:Math.floor(Math.random()*200)+50}}catch{a[h]={service:"api-name-invoice-job",version:"0.0.0",url:f,status:"offline",environment:h,region:"paris",responseTime:0}}const n=[],j=(t=a.dev)==null?void 0:t.version,l=(s=a.uat)==null?void 0:s.version,o=(i=a.oat)==null?void 0:i.version,d=(x=a.prod)==null?void 0:x.version;d&&o&&b(d,o)>0&&n.push(`CRITICAL: PROD version (${d}) is higher than OAT version (${o})`),d&&l&&b(d,l)>0&&n.push(`CRITICAL: PROD version (${d}) is higher than UAT version (${l})`),o&&l&&b(o,l)>0&&n.push(`WARNING: OAT version (${o}) is higher than UAT version (${l})`);const F={results:a,violations:n,compliant:n.length===0,timestamp:new Date().toISOString()};O(F),V(new Date)}catch(a){T(a.message||"Failed to check compliance")}finally{w(!1)}},b=(t,s)=>{const i=t.split(".").map(Number),x=s.split(".").map(Number),a=Math.max(i.length,x.length);for(let n=0;n<a;n++){const j=i[n]||0,l=x[n]||0;if(j!==l)return j-l}return 0};c.useEffect(()=>{g();let t;return u&&(t=setInterval(g,3e4)),()=>{t&&clearInterval(t)}},[u]);const C=c.useMemo(()=>r?{dev:r.results.dev,uat:r.results.uat,oat:r.results.oat,prod:r.results.prod}:{},[r]),U=t=>{switch(t){case"online":return"text-green-600 bg-green-100 border-green-200";case"offline":return"text-red-600 bg-red-100 border-red-200";default:return"text-gray-600 bg-gray-100 border-gray-200"}},P=t=>t.includes("CRITICAL")?"critical":t.includes("WARNING")?"warning":"info",L=t=>{switch(t){case"critical":return"text-red-700 bg-red-50 border-red-200";case"warning":return"text-yellow-700 bg-yellow-50 border-yellow-200";default:return"text-blue-700 bg-blue-50 border-blue-200"}},M=t=>{switch(t){case"prod":return"bg-red-500 text-white";case"oat":return"bg-orange-500 text-white";case"uat":return"bg-yellow-500 text-white";case"dev":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200/50 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl",children:e.jsx(S,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Version Compliance Dashboard"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Monitor API version compliance across environments"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"autoRefresh",checked:u,onChange:t=>$(t.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"autoRefresh",className:"text-sm text-gray-600",children:"Auto-refresh"})]}),k&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsxs("span",{children:["Updated: ",k.toLocaleTimeString()]})]}),e.jsxs("button",{onClick:g,disabled:p,className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[e.jsx(D,{className:`h-4 w-4 ${p?"animate-spin":""}`}),e.jsx("span",{className:"font-medium",children:"Refresh"})]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8 space-y-8",children:[p&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(D,{className:"h-8 w-8 animate-spin text-purple-600"}),e.jsx("span",{className:"text-xl text-gray-600",children:"Checking compliance across environments..."})]})}),y&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{className:"h-6 w-6 text-red-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Error"}),e.jsx("p",{className:"text-red-700 mt-1",children:y})]})]})}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[r.compliant?e.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl",children:e.jsx(m,{className:"h-6 w-6 text-white"})}):e.jsx("div",{className:"p-3 bg-gradient-to-r from-red-500 to-red-600 rounded-xl",children:e.jsx(v,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Overall Status"}),e.jsx("p",{className:`text-sm font-medium ${r.compliant?"text-green-600":"text-red-600"}`,children:r.compliant?"Compliant":"Non-Compliant"})]})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl",children:e.jsx(J,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Violations"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:r.violations.length})]})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl",children:e.jsx(z,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Service"}),e.jsx("p",{className:"text-sm text-gray-600 font-mono",children:((R=C.prod)==null?void 0:R.service)||"api-name-invoice-job"})]})]})}),e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl",children:e.jsx(q,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Region"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ðŸ‡«ðŸ‡· Paris"})]})]})})]}),r.violations.length>0&&e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-red-50 to-orange-50 border-b border-red-200",children:e.jsxs("h3",{className:"text-lg font-semibold text-red-800 flex items-center space-x-2",children:[e.jsx(v,{className:"h-5 w-5"}),e.jsx("span",{children:"Compliance Violations Detected"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:r.violations.map((t,s)=>{const i=P(t);return e.jsx("div",{className:`p-4 rounded-xl border-2 ${L(i)} transition-all duration-200 hover:shadow-lg`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(v,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:t}),e.jsx("p",{className:"text-sm mt-1 opacity-80",children:"This violates the deployment hierarchy requirements and should be addressed immediately."})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i==="critical"?"bg-red-200 text-red-800":"bg-yellow-200 text-yellow-800"}`,children:i.toUpperCase()})]})},s)})})})]}),e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50 to-blue-50 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Environment Version Matrix"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Real-time version comparison across all environments"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Environment"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Version"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Response Time"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white/50 divide-y divide-gray-200",children:["dev","uat","oat","prod"].map(t=>{const s=C[t];return e.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors duration-150",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${M(t)}`,children:t.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"text-lg font-mono font-bold text-gray-900 bg-gray-100 px-3 py-1 rounded-lg",children:["v",(s==null?void 0:s.version)||"N/A"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border-2 ${s?U(s.status):"text-gray-600 bg-gray-100 border-gray-200"}`,children:[(s==null?void 0:s.status)==="online"&&e.jsx(m,{className:"h-4 w-4 mr-1"}),(s==null?void 0:s.status)==="offline"&&e.jsx(E,{className:"h-4 w-4 mr-1"}),(s==null?void 0:s.status)||"Unknown"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s!=null&&s.responseTime?`${s.responseTime}ms`:"N/A"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(s==null?void 0:s.url)&&e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center space-x-1 text-blue-600 hover:text-blue-800 transition-colors",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"View"})]})})]},t)})})]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-8 border border-blue-200",children:[e.jsxs("h3",{className:"text-xl font-semibold text-blue-900 mb-6 flex items-center space-x-2",children:[e.jsx(S,{className:"h-6 w-6"}),e.jsx("span",{children:"Deployment Hierarchy & Compliance Rules"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-4",children:"Expected Deployment Flow"}),e.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[e.jsx("span",{className:"px-3 py-2 bg-green-500 text-white rounded-lg font-medium",children:"DEV"}),e.jsx("span",{className:"text-blue-600",children:"â†’"}),e.jsx("span",{className:"px-3 py-2 bg-yellow-500 text-white rounded-lg font-medium",children:"UAT"}),e.jsx("span",{className:"text-blue-600",children:"â†’"}),e.jsx("span",{className:"px-3 py-2 bg-orange-500 text-white rounded-lg font-medium",children:"OAT"}),e.jsx("span",{className:"text-blue-600",children:"â†’"}),e.jsx("span",{className:"px-3 py-2 bg-red-500 text-white rounded-lg font-medium",children:"PROD"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-4",children:"Compliance Rules"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-2",children:[e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"PROD version â‰¤ OAT version"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"PROD version â‰¤ UAT version"})]}),e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"OAT version â‰¤ UAT version"})]})]})]})]})]})]})]})]})}export{X as default};
