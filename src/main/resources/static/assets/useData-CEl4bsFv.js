import{r as c,c as m}from"./index-oD7gYlKs.js";function S(e=!0){const[t,r]=c.useState({projects:[],apis:[],lastUpdated:0,loading:!0}),n=c.useRef(void 0),o=c.useCallback(async()=>{r(s=>({...s,loading:!0,error:void 0}));try{const l=(await m.get("/api/data/projects")).data;r({projects:l.projects,apis:l.apis,lastUpdated:Date.now(),loading:!1})}catch(s){r(l=>({...l,loading:!1,error:(s==null?void 0:s.message)||"Failed to load"}))}},[]);return c.useEffect(()=>{if(o(),!!e)return n.current=window.setInterval(o,3e4),()=>{n.current&&clearInterval(n.current)}},[o,e]),{state:t,reload:o}}function y(e){if(!e||!Array.isArray(e))return{total:0,online:0,avgResp:0,uptime:0,errors:0,errorRate:0,httpsScore:0,responseTimeScore:0,availabilityScore:0,overallScore:0};const t=e.length,r=e.filter(a=>a.status==="online").length,n=t?Math.round(e.reduce((a,g)=>a+(g.responseTime||0),0)/t):0,o=t?Math.round(r/t*100):0,s=e.filter(a=>a.status==="offline").length,l=t?Math.round(s/t*100):0,d=e.filter(a=>a.url.startsWith("https://")),p=e.filter(a=>(a.responseTime??0)<=1e3),i=t?d.length/t*100:0,u=t?p.length/t*100:0,f=t?r/t*100:0,h=(i+u+f)/3;return{total:t,online:r,avgResp:n,uptime:o,errors:s,errorRate:l,httpsScore:i,responseTimeScore:u,availabilityScore:f,overallScore:h}}function A(e,t,r,n){return!e||!Array.isArray(e)?[]:e.filter(o=>(t==="all"||o.projectId===t)&&(r==="all"||o.environment===r)&&(n==="all"||o.region===n))}export{y as c,A as f,S as u};
