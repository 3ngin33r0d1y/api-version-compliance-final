import{r as l,j as e,a as d}from"./index-DiAMUAL0.js";import{u as h}from"./useData-CEicky3L.js";function b(){const{state:c,reload:a}=h(!0),[x,r]=l.useState(!1),[n,o]=l.useState("");async function p(){n.trim()&&(await d.post("/api/data/projects",{name:n}),r(!1),o(""),await a())}async function u(t){await d.delete("/api/data/projects/"+t),await a()}async function m(t){const s=prompt("API URL?");if(!s)return;const i=prompt("Environment (dev/staging/prod)?","dev")||"dev",j=prompt("Region (us-east-1/us-west-2/eu-west-1/ap-southeast-1)?","us-east-1")||"us-east-1";await d.post(`/api/data/projects/${t}/apis`,{projectId:t,url:s,environment:i,region:j}),await a()}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"font-semibold",children:"Projects"}),e.jsx("button",{className:"px-3 py-1 rounded border",onClick:()=>r(!0),children:"New Project"})]}),x&&e.jsxs("div",{className:"bg-white border rounded-xl p-4 flex gap-2",children:[e.jsx("input",{className:"border rounded px-2 py-2 flex-1",placeholder:"Project name",value:n,onChange:t=>o(t.target.value)}),e.jsx("button",{className:"px-3 py-2 rounded bg-gray-900 text-white",onClick:p,children:"Create"}),e.jsx("button",{className:"px-3 py-2 rounded border",onClick:()=>r(!1),children:"Cancel"})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:c.projects.map(t=>{const s=c.apis.filter(i=>i.projectId===t.id).length;return e.jsxs("div",{className:"bg-white border rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:t.name}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Created: ",new Date(t.createdAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-2 py-1 text-xs rounded border",onClick:()=>m(t.id),children:"Add API"}),e.jsx("button",{className:"px-2 py-1 text-xs rounded border",onClick:()=>u(t.id),children:"Delete"})]})]}),e.jsxs("div",{className:"text-sm mt-2",children:["APIs: ",s]})]},t.id)})})]})}export{b as default};
