import{r as l,c as m}from"./index-CvqjlfBS.js";function S(e=!0){const[t,r]=l.useState({projects:[],apis:[],lastUpdated:0,loading:!0}),a=l.useRef(void 0),s=l.useCallback(async()=>{r(o=>({...o,loading:!0,error:void 0}));try{const c=(await m.get("/api/data/projects")).data;r({projects:c.projects,apis:c.apis,lastUpdated:Date.now(),loading:!1})}catch(o){r(c=>({...c,loading:!1,error:(o==null?void 0:o.message)||"Failed to load"}))}},[]);return l.useEffect(()=>{if(s(),!!e)return a.current=window.setInterval(s,3e4),()=>{a.current&&clearInterval(a.current)}},[s,e]),{state:t,reload:s}}function j(e){const t=e.length,r=e.filter(n=>n.status==="online").length,a=t?Math.round(e.reduce((n,g)=>n+(g.responseTime||0),0)/t):0,s=t?Math.round(r/t*100):0,o=e.filter(n=>n.status==="offline").length,c=t?Math.round(o/t*100):0,f=e.filter(n=>n.url.startsWith("https://")),p=e.filter(n=>(n.responseTime??0)<=1e3),i=t?f.length/t*100:0,u=t?p.length/t*100:0,d=t?r/t*100:0,h=(i+u+d)/3;return{total:t,online:r,avgResp:a,uptime:s,errors:o,errorRate:c,httpsScore:i,responseTimeScore:u,availabilityScore:d,overallScore:h}}function w(e,t,r,a){return e.filter(s=>(t==="all"||s.projectId===t)&&(r==="all"||s.environment===r)&&(a==="all"||s.region===a))}export{j as c,w as f,S as u};
