import{r as o,j as e}from"./index-D-CHWSD-.js";import{u as m,f as p,c as h}from"./useData-n5ijifMl.js";function w(){const{state:s,reload:t}=m(!0),[a,r]=o.useState("all"),[i,c]=o.useState("all"),[n,l]=o.useState("all"),u=o.useMemo(()=>p(s.apis,a,i,n),[s.apis,a,i,n]),v=o.useMemo(()=>h(u),[u]);return e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{state:s,projectId:a,setProjectId:r,env:i,setEnv:c,region:n,setRegion:l}),e.jsx(g,{ts:s.lastUpdated,loading:s.loading,onReload:t}),e.jsx(N,{m:v}),e.jsx(b,{apis:u})]})}function j({state:s,projectId:t,setProjectId:a,env:r,setEnv:i,region:c,setRegion:n}){return e.jsxs("div",{className:"bg-white p-3 rounded-xl border grid md:grid-cols-4 gap-3",children:[e.jsxs("select",{className:"border rounded px-2 py-2",value:t,onChange:l=>a(l.target.value==="all"?"all":Number(l.target.value)),children:[e.jsx("option",{value:"all",children:"All Projects"}),s.projects.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),e.jsxs("select",{className:"border rounded px-2 py-2",value:r,onChange:l=>i(l.target.value),children:[e.jsx("option",{value:"all",children:"All Environments"}),e.jsx("option",{value:"dev",children:"dev"}),e.jsx("option",{value:"staging",children:"staging"}),e.jsx("option",{value:"prod",children:"prod"})]}),e.jsxs("select",{className:"border rounded px-2 py-2",value:c,onChange:l=>n(l.target.value),children:[e.jsx("option",{value:"all",children:"All Regions"}),e.jsx("option",{value:"us-east-1",children:"us-east-1"}),e.jsx("option",{value:"us-west-2",children:"us-west-2"}),e.jsx("option",{value:"eu-west-1",children:"eu-west-1"}),e.jsx("option",{value:"ap-southeast-1",children:"ap-southeast-1"})]}),e.jsx("div",{className:"text-sm text-gray-600 flex items-center",children:"Filters apply in real-time."})]})}function g({ts:s,loading:t,onReload:a}){return e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{children:["Last updated: ",s?new Date(s).toLocaleTimeString():"—"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[t&&e.jsx("span",{className:"animate-pulse",children:"Refreshing…"}),e.jsx("button",{onClick:a,className:"px-3 py-1 rounded border bg-white",children:"Refresh now"})]})]})}function N({m:s}){return s.total,s.total,s.uptime+"",s.avgResp,Math.round(s.overallScore)+"",e.jsxs("div",{className:"grid md:grid-cols-5 gap-3",children:[e.jsx(d,{title:"Total Projects",value:void 0,extraClasses:"",children:e.jsx("div",{className:"text-3xl font-semibold"})}),e.jsx(d,{title:"Total APIs",value:s.total}),e.jsx(d,{title:"Uptime %",value:s.uptime+"%",children:e.jsx(x,{pct:s.uptime})}),e.jsx(d,{title:"Avg Response (ms)",value:s.avgResp}),e.jsx(d,{title:"Compliance Score",value:Math.round(s.overallScore)+"%",children:e.jsx(x,{pct:s.overallScore})})]})}function d({title:s,value:t,children:a,extraClasses:r}){return e.jsxs("div",{className:"bg-white border rounded-xl p-4 "+(r||""),children:[e.jsx("div",{className:"text-sm text-gray-600",children:s}),e.jsx("div",{className:"text-3xl font-semibold",children:t??""}),a]})}function x({pct:s}){const t=Math.max(0,Math.min(100,Math.round(s)));return e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded",children:e.jsx("div",{className:"h-2 rounded",style:{width:`${t}%`,background:"#10b981"}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t,"%"]})]})}function b({apis:s}){const t={};s.forEach(r=>{t[r.environment]=(t[r.environment]||0)+1});const a=Object.entries(t);return e.jsxs("div",{className:"bg-white border rounded-xl p-4",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Environment Distribution"}),a.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"No data"}):e.jsx("div",{className:"grid grid-cols-3 gap-4",children:a.map(([r,i])=>e.jsxs("div",{className:"border rounded p-3",children:[e.jsx("div",{className:"text-sm text-gray-600",children:r}),e.jsx("div",{className:"text-2xl font-semibold",children:i})]},r))})]})}export{w as default};
